jQuery(document).ready(function($){function politicode_oneclick_init(amount,campaign_id,utm){var pc_dbg=politicode_oc_dbg||false;pc_dbg&&console.debug("@@@ EXEC: politicode_oneclick_init( "+amount+", "+campaign_id+", "+String(utm)+" )");(function(factory){if(typeof define==="function"&&define.amd)define(factory);else if(typeof exports==="object")module.exports=factory();else{var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api}}})(function(){function extend(){var i=
0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function init(converter){function api(key,value,attributes){var result;if(typeof document==="undefined")return;if(arguments.length>1){attributes=extend({path:"/"},api.defaults,attributes);if(typeof attributes.expires==="number"){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864E5);attributes.expires=expires}try{result=
JSON.stringify(value);if(/^[\{\[]/.test(result))value=result}catch(e){}if(!converter.write)value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);else value=converter.write(value,key);key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,escape);return document.cookie=[key,"=",value,attributes.expires&&"; expires="+attributes.expires.toUTCString(),attributes.path&&
"; path="+attributes.path,attributes.domain&&"; domain="+attributes.domain,attributes.secure?"; secure":""].join("")}if(!key)result={};var cookies=document.cookie?document.cookie.split("; "):[];var rdecode=/(%[0-9A-Z]{2})+/g;var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split("=");var cookie=parts.slice(1).join("=");if(cookie.charAt(0)==='"')cookie=cookie.slice(1,-1);try{var name=parts[0].replace(rdecode,decodeURIComponent);cookie=converter.read?converter.read(cookie,name):converter(cookie,
name)||cookie.replace(rdecode,decodeURIComponent);if(this.json)try{cookie=JSON.parse(cookie)}catch(e$0){}if(key===name){result=cookie;break}if(!key)result[name]=cookie}catch(e$1){}}return result}api.set=api;api.get=function(key){return api(key)};api.getJSON=function(){return api.apply({json:true},[].slice.call(arguments))};api.defaults={};api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))};api.withConverter=init;return api}return init(function(){})});var Cookies2=Cookies.noConflict();
Cookies2.json=true;Cookies2.defaults={path:"/",secure:true,domain:"."+document.location.hostname.match(/[^\.]+\.[^\.]+$/),expires:90};var C_N_da="C_da1",C_N_oc="C_oc1";function clear_all_cookies(){pc_dbg&&console.debug("@@@ EXEC: clear_all_cookies()");Cookies2.remove(C_N_oc);Cookies2.remove(C_N_da);return true}function show_oneclick(campaign_id,link,data,utm){pc_dbg&&console.debug("@@@ EXEC: show_oneclick()");var utm_s;if(window.location.search&&window.location.search.indexOf("utm_")>0){var sq=window.location.search;
if(sq.indexOf("?")==0)sq=sq.substring(1);if(sq.indexOf("&amount=")>0)sq=sq.replace(/&amount=[^&\?]*/gi,"");if(sq.indexOf("campaign_id=")>0)sq=sq.replace(/&?campaign_id=[^&\?]*/gi,"");if(sq.indexOf("email=")>0)sq=sq.replace(/&?email=[^&\?]*/gi,"");utm_s="&"+sq}else utm_s="&utm_campaign=djt_website_donate&utm_source=website&utm_medium=web&utm_content=mid_form";var one_tap_link=link+"?campaign_id="+campaign_id+"&email="+data.email;var $join_trump_w=$("#join-trump-w");var $top_h=$join_trump_w.find(".top-h");
var $bottom_h=$join_trump_w.find(".bottom-h");var first_name="";if(typeof data.firstname==="string"&&data.firstname.length>1)first_name=data.firstname.replace(/[^a-zA-Z0-9.,'\-_\s]/g,"")+",";$top_h.html("<h4>"+first_name+"<br><span>Thanks for your support.</span></h4>");$(".donate-amounts").remove();var highest=data.highest_personal_contribution.replace(/\.[0-9]*/,"")*1;var highest_link=one_tap_link+"&amount="+highest+utm_s;var highest_doubled_link=one_tap_link+"&amount="+highest*1*2+utm_s;var $btn1=
$join_trump_w.find(".aBtn");$btn1.addClass("OneC").attr("id","ocabtn1").find(".BtnNext").text("Donate $"+highest+" now").attr("href",highest_link);var latest=data.most_recent_contribution.replace(/\.[0-9]*/,"")*1;var latest_link=one_tap_link+"&amount="+latest+utm_s;var $btn2=$btn1.clone();$btn2.attr("id","ocabtn2").appendTo($bottom_h).find(".BtnNext").text("Donate $"+highest*1*2+" now").attr("href",highest_doubled_link);$("<p>*your secure one-click donation will process immediately</p>").appendTo($bottom_h);
function set_main_nav(){pc_dbg&&console.debug("@@@ EXEC: set_main_nav("+latest+")");$("#nav_donate").addClass("OneC");$("li.nav_donate").find("a").html("Donate $"+latest+"<span>secure one-click</span>").attr("href",latest_link);return}setTimeout(set_main_nav,1E3);return true}function query_revv_for_donor(){pc_dbg&&console.debug("@@@ EXEC: query_revv_for_donor()");$.ajax("https://app.revv.co/api/v3/donors/me",{method:"GET",timeout:10*1E3,contentType:"application/vnd.api+json",cache:true,dataType:"json",
accepts:{revvjson:"application/vnd.api+json"},xhrFields:{withCredentials:true}}).always(function(data,s,o){if(pc_dbg){console.debug(data);console.debug(s);console.debug(o)}Cookies2.set(C_N_oc,"1",{expires:new Date((new Date).getTime()+1*60*1E3)})}).success(function(data,s,o){if(s!="error"&&typeof data.email==="string"&&typeof data.highest_personal_contribution!=="undefined"&&typeof data.firstname!=="undefined"&&data.email.length>4){pc_dbg&&console.debug("query_revv_for_donor() succeeded");Cookies2.set(C_N_da,
data,{expires:30});show_oneclick(campaign_id,donation_link,data,utm)}});return}if(window.location.search.indexOf("politicode_clear_all_cookies")>0){clear_all_cookies();return}var already_queried=Cookies2.get(C_N_oc);already_queried="undefined"===typeof already_queried?false:true;pc_dbg&&console.debug((already_queried?"ALREADY":"NEVER")+" hit api for this user");var C_da=Cookies2.getJSON(C_N_da);if(typeof C_da!=="object"||typeof C_da.email!=="string"||typeof C_da.highest_personal_contribution==="undefined"||
typeof C_da.firstname==="undefined"||C_da.email.length<4)C_da=0;var has_data=C_da!==0?true:false;if(pc_dbg){console.debug((has_data?"HAS":"NO")+" saved data for user in cookie");console.debug(C_da)}if(!has_data&&!already_queried)query_revv_for_donor();else if(has_data)show_oneclick(campaign_id,donation_link,C_da,utm);return}var politicode_oc_dbg=window.location.hash.indexOf("pdebug")>0;var donation_link="https://secure.donaldjtrump.com/donate-homepage/";politicode_oneclick_init("1","eb6e71c87e7f957ea30342420c02e754",
"&utm_campaign=djt_website_donate&utm_source=website&utm_medium=web&utm_content=mid_donate")});
